<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>DevState: Social Links</title>

		<meta name="description" content="Devstate : Finest HTML5 Canvas and WebGL Workshops" />
		<meta name="keywords" content="Sakri, Rosenstrom, Frank, Reitberger, HTML5, Canvas, WebGL, workshops, trainings" />
		<meta name="author" content="Sakri Rosenstrom, Frank Reitberger" />

		<meta http-equiv="Pragma" content="no-cache" />
		<meta http-equiv="Expires" content="-1" />	
		<meta name="viewport" content="width=device-width,initial-scale=1" />
		
		<link rel="shortcut icon" href="http://www.devstate.net/assets/favicon.ico">
		<link rel="stylesheet" type="text/css" href="css/fonts.min.css">

		<!-- GOOGLE ANALYTICS -->
		<script>
		(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
		(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
		m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
		})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

		ga('create', 'UA-44531934-1', 'devstate.net');

		var readyStateCheckInterval = setInterval( function() {
			if (document.readyState === "complete") {
				setUpSocialMediaLinkClickLogging();
				clearInterval(readyStateCheckInterval);
			}
		}, 10);

		//CAPTURE CLICKS FOR GA
		function setUpSocialMediaLinkClickLogging(){
			var anchors = document.getElementsByTagName("a");
			var anchor;
			for (var i = 0; i < anchors.length; ++i) {
				anchor=anchors[i];
				if(anchor.href.indexOf("http")==0 && anchor.href.indexOf("devstate.net")==-1 ){
					anchor.addEventListener("click",logSocialMediaLinkClick);
				}
			}
		}

		function logSocialMediaLinkClick(event){
			var link=event.currentTarget;
			event.preventDefault();
			
			var name=String(link).replace(/.*?:\/\//g, "");;//from http://stackoverflow.com/questions/8206269/javascript-how-to-remove-http-from-url
			if(name.indexOf("www.")==0){
				name=name.split("www.")[1];
			}
			name=name.split(".")[0];
			ga("send", "event", "SocialMediaLinks", "Click", name);
			window.open(link,"_blank");
		}
		  
		var mailNode;

		function checkEmail( emailAddress ) {

		  var sQtext = '[^\\x0d\\x22\\x5c\\x80-\\xff]';
		  var sDtext = '[^\\x0d\\x5b-\\x5d\\x80-\\xff]';
		  var sAtom = '[^\\x00-\\x20\\x22\\x28\\x29\\x2c\\x2e\\x3a-\\x3c\\x3e\\x40\\x5b-\\x5d\\x7f-\\xff]+';
		  var sQuotedPair = '\\x5c[\\x00-\\x7f]';
		  var sDomainLiteral = '\\x5b(' + sDtext + '|' + sQuotedPair + ')*\\x5d';
		  var sQuotedString = '\\x22(' + sQtext + '|' + sQuotedPair + ')*\\x22';
		  var sDomain_ref = sAtom;
		  var sSubDomain = '(' + sDomain_ref + '|' + sDomainLiteral + ')';
		  var sWord = '(' + sAtom + '|' + sQuotedString + ')';
		  var sDomain = sSubDomain + '(\\x2e' + sSubDomain + ')*';
		  var sLocalPart = sWord + '(\\x2e' + sWord + ')*';
		  var sAddrSpec = sLocalPart + '\\x40' + sDomain; // complete RFC822 email address spec
		  var sValidEmail = '^' + sAddrSpec + '$'; // as whole string

		  var reValidEmail = new RegExp(sValidEmail);
		  
		  if (reValidEmail.test(emailAddress)) {
			return true;
		  }
		  return false;
		}


		function transfer() {
			var userMail = document.getElementById("mailField").value;
			if ( checkEmail( userMail ) ) {
				 var formData = new FormData();
				 formData.append( 'ml', document.getElementById("mailField").value );
				 var xhr = new XMLHttpRequest();
				 xhr.open('POST','./subscribe.php');
				 xhr.onload = function() {
					if( this.status == 200 ) {
                        var mailNode = document.getElementById("subscriber");
                        console.log("mail sent succesful!");
						mailNode.innerHTML = '<p>Subscribe & Stay informed:&nbsp;<input type="text" name="eMail" id="mailField" /><a href="javascript:transfer();">&nbsp;Submit.</a>&nbsp;<font color="'+DSColors.ORANGE+'">Thank you!</font></p> ';
					}
				 }
				 xhr.send( formData );
			} else {
				alert( "You must be kidding! \nThat's not a valid mail address at all...\n;)" );
			}
		}
		  
		</script>
		
		<style>
		
        .socialMediaImageLink{
            text-decoration:none;
            padding-left:2px;
            padding-right:2px;
            margin-left:0px;
            margin-left:0px;
        }

        nav h2{
            display:none;
        }

        nav ul{
            margin:0px;
            padding:0px;
        }

        nav li{
            list-style-type:none;
            display:inline;
            margin-top:10px;
        }
		
		#subscriber{
			width:100%;
			text-align:center;
            vertical-align: top;
			font-family:'sf_collegiate_solidregular', Arial, Helvetica, sans-serif;
			font-size:22px;
			padding-bottom:10px;
            text-transform:uppercase;
            color: #FFFFFF;
		}

		#subscriber a{
			text-decoration:none;
            color: #FFFFFF;
		}

		#subscriber  a:hover{
			color:#000000;
		}
            
		</style>
	</head>
	<body>
	
		<div id="subscriber">
			<p>Subscribe & Stay informed:&nbsp;<input type="text" name="eMail" id="mailField" /><a href="javascript:transfer();">&nbsp;Submit.</a></p>
		</div>
	
		<nav id="socialMediaBar" style="text-align: center;">
			<h2>Devstate Social Media Links</h2>
			<ul>

				<li><a href="https://twitter.com/DevSt8" class="socialMediaImageLink" >
					<img 	src="assets/socialIcons/twitter.png" 
							title="Keep up to date with our progress in 140 characters and less. Don't hesiteate to retweet, favorite and follow!" 
							alt="Keep up to date with our progress in 140 characters and less. Don't hesiteate to retweet, favorite and follow!" 
							/></a></li>
				<li><a href="https://www.facebook.com/DevStateWorkshops" class="socialMediaImageLink"  >
					<img 	src="assets/socialIcons/facebook.png" 
							title="Devstate facebook fanpage. Like, share and comment!" 
							alt="Devstate facebook fanpage. Like, share and comment!" 
							/></a></li>
				<li><a href="http://www.instagram.com/DevSt8" class="socialMediaImageLink" >
					<img 	src="assets/socialIcons/instagram.png" 
							title="Follow Devstate through the pretty filters of Instagram!" 
							alt="Follow Devstate through the pretty filters of Instagram!" 
							/></a></li>
				<li><a href="https://plus.google.com/u/0/117236613911388170124/posts" class="socialMediaImageLink" >
					<img 	src="assets/socialIcons/googlePlus.png" 
							title="Devstate on Google+. Plus one us baby!" 
							alt="Devstate on Google+. Plus one us baby!" 
							/></a></li>
				<li><a href="http://www.linkedin.com/company/devstate/" class="socialMediaImageLink" >
					<img 	src="assets/socialIcons/LinkedIn.png" 
							title="Devstate Linked In profile. Like us and do recommend us!" 
							alt="Devstate Linked In profile. Like us and do recommend us!" 
							/></a></li>
							
				<li><a href="https://github.com/DevState" class="socialMediaImageLink" >
					<img 	src="assets/socialIcons/github.png" 
							title="See the source code of all our demos and experiements. Follow and Star us if you like what you see." 
							alt="See the source code of all our demos and experiements. Follow and Star us if you like what you see." 
							/></a></li>
				<li><a href="https://vimeo.com/devstate" class="socialMediaImageLink" >
					<img 	src="assets/socialIcons/vimeo.png" 
							title="We'll be documenting the process of flash developers re-inventing themselves as trainers of the Finest Canvas and WebGL workshops" 
							alt="We'll be documenting the process of flash developers re-inventing themselves as trainers of the Finest Canvas and WebGL workshops" 
							/></a></li>	
				<li><a href="http://www.pinterest.com/devstate/" class="socialMediaImageLink" >
					<img 	src="assets/socialIcons/pinterest.png" 
							title="See our inspiration for the logo, identity, demo and website design." 
							alt="See our inspiration for the logo, identity, demo and website design." 
							/></a></li>									
			</ul>
		</nav>

	</body>
</html>
