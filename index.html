
<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>DevState: Finest Canvas & WebGL workshops</title>

<meta http-equiv="Pragma" content="no-cache">
<meta http-equiv="Expires" content="-1">	
<meta name="viewport" content="width=device-width,initial-scale=1">

<link rel="stylesheet" href="./css/fonts.css">
<link rel="stylesheet" href="./css/styles.css">

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-44531934-1', 'devstate.net');
  ga('send', 'pageview');

</script>

<script src="./js/h5utils.js"></script>


</head>
<body bgcolor="#FFFFFF">
	
<div id="container">
	
	<div id="holder">

	</div>
	
	<div id="fontLoader" class="handwriting size2">
		
		<font color="#FFFFFF"> .</font>
		
	</div>	

</div>

<div id="subscriber"></div>


<script type="text/javascript">

var mailNode = id( 'subscriber' );

function checkEmail( emailAddress ) {

  var sQtext = '[^\\x0d\\x22\\x5c\\x80-\\xff]';
  var sDtext = '[^\\x0d\\x5b-\\x5d\\x80-\\xff]';
  var sAtom = '[^\\x00-\\x20\\x22\\x28\\x29\\x2c\\x2e\\x3a-\\x3c\\x3e\\x40\\x5b-\\x5d\\x7f-\\xff]+';
  var sQuotedPair = '\\x5c[\\x00-\\x7f]';
  var sDomainLiteral = '\\x5b(' + sDtext + '|' + sQuotedPair + ')*\\x5d';
  var sQuotedString = '\\x22(' + sQtext + '|' + sQuotedPair + ')*\\x22';
  var sDomain_ref = sAtom;
  var sSubDomain = '(' + sDomain_ref + '|' + sDomainLiteral + ')';
  var sWord = '(' + sAtom + '|' + sQuotedString + ')';
  var sDomain = sSubDomain + '(\\x2e' + sSubDomain + ')*';
  var sLocalPart = sWord + '(\\x2e' + sWord + ')*';
  var sAddrSpec = sLocalPart + '\\x40' + sDomain; // complete RFC822 email address spec
  var sValidEmail = '^' + sAddrSpec + '$'; // as whole string

  var reValidEmail = new RegExp(sValidEmail);

  if (reValidEmail.test(emailAddress)) {
    return true;
  }

  return false;
  
}


function transfer() {

	var userMail = document.getElementById("mailField").value;
	
	if ( checkEmail( userMail ) ) {
	
		 var formData = new FormData();
		 formData.append( 'ml', document.getElementById("mailField").value );
		
		 var xhr = new XMLHttpRequest();
		 xhr.open('POST','./subscribe.php');
		 xhr.onload = function() {
		 
			if( this.status == 200 ) {
				
			    mailNode.innerHTML = 'SUBSCRIBE & STAY INFORMED:&nbsp;<input type="text" name="eMail" id="mailField" /><a href="javascript:transfer();">&nbsp;Submit.</a>&nbsp;<font color="#FF0000">THANK YOU!</font> ';
				
			}
			
		 }
		 xhr.send( formData );	
	
	} else {
		
		alert( 'You must be kidding! \nThat´s not a valid mailaddress at all...\n;)' );
	
	}
	
}
function decorate() {

	mailNode.style.position 	   = 'fixed';
	mailNode.style.display  	   = 'table-cell';
	mailNode.style.textAlign       = 'center';	 
	mailNode.style.verticalAlign   = 'middle';
	mailNode.style.width    	   = '100%';
	mailNode.style.height   	   = '20px';
	mailNode.style.bottom   	   = '14px';
	mailNode.style.backgroundColor = '#FFFFFF';
	mailNode.style.zIndex          = 2;
	
	mailNode.classList.add('handwriting');
	mailNode.classList.add('size16');
	
	mailNode.innerHTML = 'SUBSCRIBE & STAY INFORMED:&nbsp;<input type="text" name="eMail" id="mailField" /><a href="javascript:transfer();">&nbsp;Submit.</a>';
}

var readyStateCheckInterval = setInterval( function() {
    
	if (document.readyState === "complete") {
        decorate();
        clearInterval(readyStateCheckInterval);
    }
}, 10);


</script>

</body>
</html>
