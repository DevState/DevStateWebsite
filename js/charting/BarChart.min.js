(function(a){BarChart=function(c,f,e,b,d){SimpleGeometry.Rectangle.call(this,c,f,e,b);if(!isNaN(d)){this.barWidth=d}this.renderPoint=new SimpleGeometry.Point();this.extrudeWidth=6;this.lightColor=DSColors.PINK_ORANGE;this.darkColor=DSColors.ORANGE};BarChart.prototype=Object.create(SimpleGeometry.Rectangle.prototype);BarChart.prototype.constructor=SimpleGeometry.Rectangle;BarChart.prototype.setValues=function(c,b){this.values=c;this.max=b};BarChart.prototype.setRandomValues=function(){var b=[];var c=3+Math.floor(Math.random()*3);while(c>0){b.push(10+Math.floor(Math.random()*90));c--}this.setValues(b,100)};BarChart.prototype.setBarColors=function(b){this.colors=b};BarChart.prototype.setRandomColors=function(){this.colors=[];while(this.colors.length!=this.values.length){this.colors.push(SimpleGeometry.getRandomFillStyleColor())}};BarChart.prototype.calculateYPosition=function(c,b){return SimpleGeometry.interpolate(SimpleGeometry.normalize(c,0,this.max)*b,this.getBottom(),this.y)};BarChart.prototype.render=function(d,b){if(!this.values){this.setRandomValues()}if(!this.colors){this.setRandomColors()}if(isNaN(b)){b=1}if(!this.barWidth){this.barWidth=(this.width/2)/this.values.length}this.barSpacer=(this.width-this.barWidth*this.values.length)/(this.values.length+1);var e;d.strokeStyle="#FFFFFF";for(var c=0;c<this.values.length;c++){d.fillStyle=this.lightColor;this.renderPoint.x=this.x+this.barSpacer+(this.barSpacer*c)+(this.barWidth*c);this.renderPoint.y=this.calculateYPosition(this.values[c],b);d.beginPath();d.moveTo(this.renderPoint.x,this.renderPoint.y);d.lineTo(this.renderPoint.x+this.extrudeWidth,this.renderPoint.y-this.extrudeWidth);d.lineTo(this.renderPoint.x+this.extrudeWidth+this.barWidth,this.renderPoint.y-this.extrudeWidth);d.lineTo(this.renderPoint.x+this.barWidth,this.renderPoint.y);d.lineTo(this.renderPoint.x,this.renderPoint.y);d.closePath();d.fill();d.stroke();d.beginPath();d.moveTo(this.renderPoint.x+this.barWidth,this.renderPoint.y);d.lineTo(this.renderPoint.x+this.extrudeWidth+this.barWidth,this.renderPoint.y-this.extrudeWidth);d.lineTo(this.renderPoint.x+this.extrudeWidth+this.barWidth,this.y+this.height-this.extrudeWidth);d.lineTo(this.renderPoint.x+this.barWidth,this.y+this.height);d.lineTo(this.renderPoint.x+this.barWidth,this.renderPoint.y);d.closePath();d.fill();d.stroke();e=d.createLinearGradient(0,this.renderPoint.y,0,this.y+this.height);e.addColorStop(0,this.lightColor);e.addColorStop(1,this.darkColor);d.fillStyle=e;d.fillRect(this.renderPoint.x,this.renderPoint.y,this.barWidth,this.y+this.height-this.renderPoint.y);d.strokeRect(this.renderPoint.x,this.renderPoint.y,this.barWidth,this.y+this.height-this.renderPoint.y)}};a.BarChart=BarChart}(window));