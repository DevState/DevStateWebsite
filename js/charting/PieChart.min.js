(function(a){PieChart=function(c,f,d,b,e){this.margin=isNaN(e)?20:e;SimpleGeometry.Rectangle.call(this,c,f,d,b);this.center=this.getCenter();this.radius=this.width<this.height?(this.width/2-this.margin*2):(this.height/2-this.margin*2)};PieChart.prototype=Object.create(SimpleGeometry.Rectangle.prototype);PieChart.prototype.constructor=SimpleGeometry.Rectangle;PieChart.prototype.setValues=function(b){this.values=b;this.total=0;for(var c=0;c<this.values.length;c++){this.total+=this.values[c]}};PieChart.prototype.setRandomValues=function(){var d=1+Math.floor(Math.random()*5);var b=[];var e;var c=100;while(d>0){e=Math.round(Math.random()*(c/2));b.push(e);c-=e;d--}b.push(c);this.setValues(b)};PieChart.prototype.setColors=function(b){this.colors=b};PieChart.prototype.setRandomColors=function(){this.colors=[];while(this.colors.length!=this.values.length){this.colors.push(SimpleGeometry.getRandomFillStyleColor())}};PieChart.prototype.render=function(g,d){if(!this.values){this.setRandomValues()}if(!this.colors){this.setRandomColors()}if(isNaN(d)){d=1}var c=0;var h;var b,e,j;g.translate(this.center.x,this.center.y);g.rotate(-Math.PI/2);for(var f=0;f<this.values.length;f++){h=this.values[f]*d;g.beginPath();g.moveTo(0,0);g.fillStyle=this.colors[f];b=SimpleGeometry.map(c,0,this.total,0,SimpleGeometry.PI2);e=SimpleGeometry.map(c+h,0,this.total,0,SimpleGeometry.PI2);g.arc(0,0,this.radius,b,e);g.lineTo(0,0);g.fill();g.closePath();j=g.createRadialGradient(0,0,this.radius*0.85,0,0,this.radius-1);j.addColorStop(0,SimpleGeometry.getRgbaStyleString(0,0,0,0));j.addColorStop(1,SimpleGeometry.getRgbaStyleString(0,0,0,0.3));g.fillStyle=j;g.beginPath();g.moveTo(0,0);g.arc(0,0,this.radius,b,e);g.lineTo(0,0);g.fill();g.closePath();c+=h}SimpleGeometry.setIdentityMatrixToContext(g)};a.PieChart=PieChart}(window));(function(a){DonutChart=function(c,g,d,b,e,f){if(!isNaN(f)){this.holePercent=f}PieChart.call(this,c,g,d,b,e)};DonutChart.prototype=Object.create(PieChart.prototype);DonutChart.prototype.constructor=PieChart;DonutChart.prototype.holePercent=0.3;DonutChart.prototype.render=function(g,d){if(!this.values){this.setRandomValues()}if(!this.colors){this.setRandomColors()}if(isNaN(d)){d=1}var c=0;var h;var b,e,j;g.translate(this.center.x,this.center.y);g.rotate(-Math.PI/2);for(var f=0;f<this.values.length;f++){h=this.values[f]*d;g.beginPath();g.moveTo(0,0);g.fillStyle=this.colors[f];b=SimpleGeometry.map(c,0,this.total,0,SimpleGeometry.PI2);e=SimpleGeometry.map(c+h,0,this.total,0,SimpleGeometry.PI2);g.arc(0,0,this.radius,b,e);g.lineTo(0,0);g.fill();g.closePath();j=g.createRadialGradient(0,0,this.radius*0.85,0,0,this.radius-1);j.addColorStop(0,SimpleGeometry.getRgbaStyleString(0,0,0,0));j.addColorStop(1,SimpleGeometry.getRgbaStyleString(0,0,0,0.3));g.fillStyle=j;g.beginPath();g.moveTo(0,0);g.arc(0,0,this.radius,b,e);g.lineTo(0,0);g.fill();g.closePath();j=g.createRadialGradient(0,0,this.radius*this.holePercent,0,0,this.radius*this.holePercent+this.radius*0.85);j.addColorStop(0,SimpleGeometry.getRgbaStyleString(0,0,0,0.5));j.addColorStop(1,SimpleGeometry.getRgbaStyleString(0,0,0,0));g.fillStyle=j;g.beginPath();g.moveTo(0,0);g.arc(0,0,this.radius,b,e);g.lineTo(0,0);g.fill();g.closePath();c+=h}g.beginPath();g.fillStyle="#FFFFFF";g.arc(0,0,this.radius*this.holePercent,0,SimpleGeometry.PI2);g.fill();g.closePath();SimpleGeometry.setIdentityMatrixToContext(g)};a.DonutChart=DonutChart}(window));