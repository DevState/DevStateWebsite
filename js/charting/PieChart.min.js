!function(a){PieChart=function(a,b,c,d,e){this.margin=isNaN(e)?20:e,SimpleGeometry.Rectangle.call(this,a,b,c,d),this.center=this.getCenter(),this.radius=this.width<this.height?this.width/2-2*this.margin:this.height/2-2*this.margin},PieChart.prototype=Object.create(SimpleGeometry.Rectangle.prototype),PieChart.prototype.constructor=SimpleGeometry.Rectangle,PieChart.prototype.setValues=function(a){this.values=a,this.total=0;for(var b=0;b<this.values.length;b++)this.total+=this.values[b]},PieChart.prototype.setRandomValues=function(){for(var a,b=1+Math.floor(5*Math.random()),c=[],d=100;b>0;)a=Math.round(Math.random()*(d/2)),c.push(a),d-=a,b--;c.push(d),this.setValues(c)},PieChart.prototype.setColors=function(a){this.colors=a},PieChart.prototype.setRandomColors=function(){for(this.colors=[];this.colors.length!=this.values.length;)this.colors.push(SimpleGeometry.getRandomFillStyleColor())},PieChart.prototype.render=function(a,b){this.values||this.setRandomValues(),this.colors||this.setRandomColors(),isNaN(b)&&(b=1);var c,d,e,f,g=0;a.translate(this.center.x,this.center.y),a.rotate(-Math.PI/2);for(var h=0;h<this.values.length;h++)c=this.values[h]*b,a.beginPath(),a.moveTo(0,0),a.fillStyle=this.colors[h],d=SimpleGeometry.map(g,0,this.total,0,SimpleGeometry.PI2),e=SimpleGeometry.map(g+c,0,this.total,0,SimpleGeometry.PI2),a.arc(0,0,this.radius,d,e),a.lineTo(0,0),a.fill(),a.closePath(),f=a.createRadialGradient(0,0,.85*this.radius,0,0,this.radius-1),f.addColorStop(0,SimpleGeometry.getRgbaStyleString(0,0,0,0)),f.addColorStop(1,SimpleGeometry.getRgbaStyleString(0,0,0,.3)),a.fillStyle=f,a.beginPath(),a.moveTo(0,0),a.arc(0,0,this.radius,d,e),a.lineTo(0,0),a.fill(),a.closePath(),g+=c;SimpleGeometry.setIdentityMatrixToContext(a)},a.PieChart=PieChart}(window),function(a){DonutChart=function(a,b,c,d,e,f){isNaN(f)||(this.holePercent=f),PieChart.call(this,a,b,c,d,e)},DonutChart.prototype=Object.create(PieChart.prototype),DonutChart.prototype.constructor=PieChart,DonutChart.prototype.holePercent=.3,DonutChart.prototype.render=function(a,b){this.values||this.setRandomValues(),this.colors||this.setRandomColors(),isNaN(b)&&(b=1);var c,d,e,f,g=0;a.translate(this.center.x,this.center.y),a.rotate(-Math.PI/2);for(var h=0;h<this.values.length;h++)c=this.values[h]*b,a.beginPath(),a.moveTo(0,0),a.fillStyle=this.colors[h],d=SimpleGeometry.map(g,0,this.total,0,SimpleGeometry.PI2),e=SimpleGeometry.map(g+c,0,this.total,0,SimpleGeometry.PI2),a.arc(0,0,this.radius,d,e),a.lineTo(0,0),a.fill(),a.closePath(),f=a.createRadialGradient(0,0,.85*this.radius,0,0,this.radius-1),f.addColorStop(0,SimpleGeometry.getRgbaStyleString(0,0,0,0)),f.addColorStop(1,SimpleGeometry.getRgbaStyleString(0,0,0,.3)),a.fillStyle=f,a.beginPath(),a.moveTo(0,0),a.arc(0,0,this.radius,d,e),a.lineTo(0,0),a.fill(),a.closePath(),f=a.createRadialGradient(0,0,this.radius*this.holePercent,0,0,this.radius*this.holePercent+.85*this.radius),f.addColorStop(0,SimpleGeometry.getRgbaStyleString(0,0,0,.5)),f.addColorStop(1,SimpleGeometry.getRgbaStyleString(0,0,0,0)),a.fillStyle=f,a.beginPath(),a.moveTo(0,0),a.arc(0,0,this.radius,d,e),a.lineTo(0,0),a.fill(),a.closePath(),g+=c;a.beginPath(),a.fillStyle="#FFFFFF",a.arc(0,0,this.radius*this.holePercent,0,SimpleGeometry.PI2),a.fill(),a.closePath(),SimpleGeometry.setIdentityMatrixToContext(a)},a.DonutChart=DonutChart}(window);