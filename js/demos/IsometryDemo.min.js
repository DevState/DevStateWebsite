(function(b){var a=function(d,g,f,c,e){AbstractDemo.call(this,d,g,f,c,e);this.gifPlaybackFrameRate=100;this.captureFrameRate=400};a.prototype=Object.create(AbstractDemo.prototype);a.prototype.constructor=AbstractDemo;a.prototype.run=function(){this.loadImagesWithImageStore(["assets/tinyLogo.png"])};a.prototype.useLoadedImageStoreImages=function(){var h=this.imageStore.images[0];var d=document.createElement("canvas");var f=d.getContext("2d");f.drawImage(h,0,0);var l=f.getImageData(0,0,h.width,h.height);this.space=new IsometricSpaceLeft(this.width,this.height,200,140,200);this.squares=[];var g,k;for(var e=0;e<10;e++){for(var c=0;c<10;c++){g=new IsometricSquare(this.context2d,this.space,e*0.1,0,0.9-c*0.1,0.1,Math.random(),0.1);k=(e*4)*l.width+c*4;g.setLeftPlaneStyle(DSColors.GREEN,1,"000000",1,1);g.setRightPlaneStyle(DSColors.GREEN,1,"000000",1,1);g.setTopPlaneStyle(l.data[k]>0?DSColors.LIGHT_GREEN:DSColors.ORANGE,1,"000000",1,1);this.squares.push(g)}}this.animator=new UnitAnimator();this.radian=0;this.reStartWave()};a.prototype.animationComplete=function(){if(this.captureCompleteCallBack){this.captureCompleteCallBack()}this.reStartWave()};a.prototype.reStartWave=function(){var c=this;this.animator.reset(1000+Math.random()*1000,20,function(){c.animationUpdate()},function(){c.animationComplete()});this.animator.start()};a.prototype.animationUpdate=function(){this.clear();this.radian=SimpleGeometry.PI2*this.animator.getAnimationPercent();var f=SimpleGeometry.PI2/10;var g,c;for(var e=0;e<10;e++){for(var d=0;d<10;d++){square=this.squares[e*10+d];g=0.25+(1+Math.cos(this.radian+e*f))/6;c=0.25+(1+Math.sin(this.radian+d*f))/6;square.setHeight((g+c)/2);square.render()}}};a.prototype.customTearDown=function(){delete this.blockSetAnimator};b.IsometryDemo=a}(window));