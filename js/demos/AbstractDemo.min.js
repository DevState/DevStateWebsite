!function(a){var b=function(a,b,c,d,e){return SimpleGeometry.Rectangle.call(this,a,b,c,d),this.demoContainer=e,this.customCaptureControls=!1,this.captureFrameRate=300,this.gifPlaybackFrameRate=100,e?(this.setUpDemo(),void 0):(console.log("AbstractDemo constructor, no demo container, cannot setUpDemo()"),void 0)};b.prototype=Object.create(SimpleGeometry.Rectangle.prototype),b.prototype.constructor=SimpleGeometry.Rectangle,b.prototype.preSetUp=function(){},b.prototype.setUpDemo=function(){this.preSetUp(),this.animator=new UnitAnimator,this.animator.setEasingFunction(UnitAnimator.easeOutSine),this.canvas=document.createElement("canvas"),this.canvas.width=this.width,this.canvas.height=this.height,this.context2d=this.canvas.getContext("2d"),this.appendCanvas(this.canvas)},b.prototype.appendCanvas=function(a){a.style.position="absolute",a.style.left="0px",a.style.top="0px",this.demoContainer.appendChild(a)},b.prototype.getGlobalDemoPosition=function(){for(var a=new SimpleGeometry.Point(0,0),b=this.canvas;b;)b.style&&b.style.left&&b.style.top&&(a.x+=parseInt(b.style.left.split("px")[0]),a.y+=parseInt(b.style.top.split("px")[0])),b=b.parentNode;return a},b.prototype.getCaptureCanvases=function(){return[this.canvas]},b.prototype.run=function(){this.clear()},b.prototype.clear=function(){this.context2d.clearRect(0,0,this.canvas.width,this.canvas.height)},b.prototype.loadImagesWithImageStore=function(a){this.imageStore=new ImageStore;var b=this;this.imageStore.loadImages(a,function(){b.imageStoreLoadComplete()},function(){b.imageStoreLoadProgress()}),this.spinner=new SimpleLoaderGraphic(this.width/2,this.height/2,25,function(){b.updateSpinner()}),this.spinner.play()},b.prototype.imageStoreLoadProgress=function(){this.spinner.loadingText="Loading images "+this.imageStore.getProgressString()},b.prototype.updateSpinner=function(){this.clear(),this.spinner.render(this.context2d)},b.prototype.imageStoreLoadComplete=function(){this.clear(),this.spinner.pause(),delete this.spinner,this.useLoadedImageStoreImages()},b.prototype.useLoadedImageStoreImages=function(){console.log("AbstractDemo.useLoadedImageStoreImages(), this must be overridden in subclasses")},b.prototype.tearDown=function(){this.animator&&(this.animator.pause(),delete this.animator),this.imageStore&&(this.imageStore.stop(),delete this.imageStore),this.spinner&&(this.spinner.pause(),delete this.spinner),this.demoContainer.removeChild(this.canvas),delete this.context2d,delete this.canvas,this.customTearDown()},b.prototype.customTearDown=function(){},b.prototype.startCustomCaptureAnimation=function(){console.log("AbstractDemo.prototype.startCustomCaptureAnimation() must be overriden by subclasses")},b.prototype.animationComplete=function(){this.captureCompleteCallBack&&this.captureCompleteCallBack()},a.AbstractDemo=b}(window);