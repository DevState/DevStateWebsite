(function(b){var a=function(d,g,f,c,e){SimpleGeometry.Rectangle.call(this,d,g,f,c);this.demoContainer=e;this.customCaptureControls=false;this.captureFrameRate=300;this.gifPlaybackFrameRate=100;if(!e){console.log("AbstractDemo constructor, no demo container, cannot setUpDemo()");return}this.setUpDemo()};a.prototype=Object.create(SimpleGeometry.Rectangle.prototype);a.prototype.constructor=SimpleGeometry.Rectangle;a.prototype.preSetUp=function(){};a.prototype.setUpDemo=function(){this.preSetUp();this.animator=new UnitAnimator();this.animator.setEasingFunction(UnitAnimator.easeOutSine);this.canvas=document.createElement("canvas");this.canvas.width=this.width;this.canvas.height=this.height;this.context2d=this.canvas.getContext("2d");this.appendCanvas(this.canvas)};a.prototype.appendCanvas=function(c){c.style.position="absolute";c.style.left="0px";c.style.top="0px";this.demoContainer.appendChild(c)};a.prototype.getGlobalDemoPosition=function(){var c=new SimpleGeometry.Point(0,0);var d=this.canvas;while(d){if(d.style&&d.style.left&&d.style.top){c.x+=parseInt(d.style.left.split("px")[0]);c.y+=parseInt(d.style.top.split("px")[0])}d=d.parentNode}return c};a.prototype.getCaptureCanvases=function(){return[this.canvas]};a.prototype.run=function(){this.clear()};a.prototype.clear=function(){this.context2d.clearRect(0,0,this.canvas.width,this.canvas.height)};a.prototype.loadImagesWithImageStore=function(c){this.imageStore=new ImageStore();var d=this;this.imageStore.loadImages(c,function(){d.imageStoreLoadComplete()},function(){d.imageStoreLoadProgress()});this.spinner=new SimpleLoaderGraphic(this.width/2,this.height/2,25,function(){d.updateSpinner()});this.spinner.play()};a.prototype.imageStoreLoadProgress=function(){this.spinner.loadingText="Loading images "+this.imageStore.getProgressString()};a.prototype.updateSpinner=function(){this.clear();this.spinner.render(this.context2d)};a.prototype.imageStoreLoadComplete=function(){this.clear();this.spinner.pause();delete this.spinner;this.useLoadedImageStoreImages()};a.prototype.useLoadedImageStoreImages=function(){console.log("AbstractDemo.useLoadedImageStoreImages(), this must be overridden in subclasses")};a.prototype.tearDown=function(){if(this.animator){this.animator.pause();delete this.animator}if(this.imageStore){this.imageStore.stop();delete this.imageStore}if(this.spinner){this.spinner.pause();delete this.spinner}this.demoContainer.removeChild(this.canvas);delete this.context2d;delete this.canvas;this.customTearDown()};a.prototype.customTearDown=function(){};a.prototype.startCustomCaptureAnimation=function(){console.log("AbstractDemo.prototype.startCustomCaptureAnimation() must be overriden by subclasses")};a.prototype.animationComplete=function(){if(this.captureCompleteCallBack){this.captureCompleteCallBack()}};b.AbstractDemo=a}(window));