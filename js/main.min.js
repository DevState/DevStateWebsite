function resizeHandler(){forceHideDemo();lightBox.isMobile=isMobile()}function viewportSize(){var c=window,b="inner";if(!("innerWidth" in window)){b="client";c=document.documentElement||document.body}return{width:c[b+"Width"],height:c[b+"Height"]}}function isHorizontalLayout(){var a=viewportSize();return a.width>a.height}function isMobile(){var a=viewportSize();return navigator.appVersion.toLowerCase().indexOf("mobile")>-1||Math.min(a.width,a.height)<400}function forceHideDemo(){if(lightBox&&lightBox.isOpen()){hideDemo(true)}}function lightBoxOverlayDivClick(){hideDemo()}function lightBoxNextDemoClickHandler(){tearDownDemo();var a=classManager.getNextDemoName();setUpDemo(a);location.hash=a;if(location.hostname&&location.hostname.toLowerCase().indexOf("devstate")>-1){ga("send","event","nextDemo")}}function lightBoxPreviousDemoClickHandler(){tearDownDemo();var a=classManager.getPreviousDemoName();setUpDemo(a);location.hash=a;if(location.hostname&&location.hostname.toLowerCase().indexOf("devstate")>-1){ga("send","event","previousDemo")}}function lightBoxResetDemoClickHandler(){tearDownDemo();setUpDemo(classManager.currentDemoName);if(location.hostname&&location.hostname.toLowerCase().indexOf("devstate")>-1){ga("send","event","resetDemo",classManager.currentDemoName)}}function lightBoxSubMenuClickHandler(a){tearDownDemo();setUpDemo(a)}var lightBoxLongSide=700;var lightBoxShortSide=400;var lightBoxVerticalLayoutHeight=600;var smallDemoSize=300;var largeDemoSize=400;var classManager;var currentDemo;var currentDemoClass;var detailsDiv;var demoRect;var contentRect;function showDemo(c){var b=viewportSize();contentRect=new SimpleGeometry.Rectangle();if(b.width>largeDemoSize&&b.height>largeDemoSize){demoRect=new SimpleGeometry.Rectangle(0,0,largeDemoSize,largeDemoSize)}else{demoRect=new SimpleGeometry.Rectangle(0,0,smallDemoSize,smallDemoSize)}var a=demoRect.width/lightBoxShortSide;if(isHorizontalLayout()){contentRect.width=lightBoxLongSide*a;contentRect.height=lightBoxShortSide*a;if(b.width<contentRect.width){contentRect.width=smallDemoSize}}else{contentRect.width=lightBoxShortSide*a;contentRect.height=lightBoxVerticalLayoutHeight*a;if(b.height<contentRect.height){contentRect.height=smallDemoSize}}contentRect.x=b.width/2-contentRect.width/2;contentRect.y=b.height/2-contentRect.height/2;if(b.width<contentRect.width||b.height<contentRect.height){alert("Sorry, your screen or resolution is too small("+b.width+"x"+b.height+") to show this demo");if(location.hostname&&location.hostname.toLowerCase().indexOf("devstate")>-1){ga("send","event","screenTooSmall",b.width+"x"+b.height)}return}lightBox.open(contentRect)}function setUpDemo(a){currentDemoClass=this[(a+"Demo")];classManager.loadDemo(a,demoJSLoadHandler,demoJSLoadErrorHandler)}function getDemoToolTip(a){return contentRect.width<largeDemoSize?"":a.toolTip}function getResetString(){return contentRect.height<largeDemoSize?"F5":"Reset"}function getLightBoxDemoTitle(a){return(demoRect.width<largeDemoSize&&a.shortDemoName!="")?a.shortDemoName:classManager.currentDemoName}function getDemoBoxTitleStyle(a){return isHorizontalLayout()?"demoTitle":"demoTitleThin"}function smallSize(){return contentRect.width==smallDemoSize&&contentRect.height==smallDemoSize}function demoJSLoadHandler(){currentDemo=new currentDemoClass(demoRect.x,demoRect.y,demoRect.width,demoRect.height,lightBox.contentDiv);currentDemo.run();var d=10;detailsDiv=document.createElement("div");detailsDiv.style.position="absolute";if(isHorizontalLayout()){detailsDiv.style.left=(d+demoRect.width)+"px";detailsDiv.style.top=d+"px";detailsDiv.style.width=(contentRect.width-demoRect.width-d*2)+"px";detailsDiv.style.height=(contentRect.height-d*2)+"px"}else{detailsDiv.style.left=d+"px";detailsDiv.style.top=(d+demoRect.height)+"px";detailsDiv.style.width=(contentRect.width-d*2)+"px";detailsDiv.style.height=(contentRect.height-demoRect.height-d*2)+"px"}detailsDiv.style.fontFamily="Sans-serif";var c="<h2 class='"+getDemoBoxTitleStyle()+"' >"+getLightBoxDemoTitle(currentDemo)+"</h2><p style='padding-top:20px'>"+getDemoToolTip(currentDemo)+"</p>";var a=classManager.getSubmenuForDemoName(classManager.currentDemoName);if(a.length>0){c+="<p class='lightboxSubMenu' >";for(var b=0;b<a.length;b++){c+="<a href = 'javascript:void(0)' onclick = 'lightBoxSubMenuClickHandler(\""+a[b]+"\")'>"+a[b]+"</a>"}c+="</p>"}c+="<p class='lightboxControls' ><a href = 'javascript:void(0)' onclick = 'lightBoxPreviousDemoClickHandler(event)'>Previous</a>";c+="<a href = 'javascript:void(0)' onclick = 'lightBoxResetDemoClickHandler()' style='padding-left:20px'>"+getResetString()+"</a>";c+="<a href = 'javascript:void(0)' onclick = 'lightBoxNextDemoClickHandler()' style='padding-left:20px'>Next</a></p>";detailsDiv.innerHTML=c;lightBox.setContent(smallSize()?undefined:detailsDiv);if(location.hostname&&location.hostname.toLowerCase().indexOf("devstate")>-1){ga("send","event","DemoView",classManager.currentDemoName)}}function demoJSLoadErrorHandler(){console.log("demoJSLoadErrorHandler()")}function tearDownDemo(){if(currentDemo){currentDemo.tearDown()}if(detailsDiv){lightBox.removeContent(detailsDiv)}}function hideDemo(a){if(a){lightBox.forceClose()}else{lightBox.close()}}function lightBoxOpenComplete(){setUpDemo(lastClickedDemoName)}function lightBoxBeginClose(){tearDownDemo();location.hash=""}var lastClickedDemoName;function demoLinkClickHandler(a){lastClickedDemoName=getDemoFromHash(a.currentTarget.hash);showDemo(lastClickedDemoName)}function setUpDemosMenu(){var a="";var c;for(var b=0;b<classManager.navigationItems.length;b++){c=classManager.getDemoResourceForNavigationItem(classManager.navigationItems[b]);a+='<div class="item">';a+='<a href="#'+c.name+'" onclick = "demoLinkClickHandler(event)">';a+='<img src="'+c.thumbnail+'" onmouseover="showGif(event)" onmouseout="showPng(event)">';a+="</a>";a+="</div>"}a+='<div class="clearfix"></div>';document.getElementById("demos").innerHTML=a}function showGif(b){var c=b.target.src.split("/");var a=c[c.length-1].split(".png")[0];c[c.length-1]=a+".gif";b.target.src=c.join("/")}function showPng(b){var c=b.target.src.split("/");var a=c[c.length-1].split(".gif")[0];c[c.length-1]=a+".png";b.target.src=c.join("/")}function getDemoFromHash(a){return a.split("#")[1]}function createTagWithValue(a,c,b){return b+"<"+a+">"+c+"</"+a+">\n"}function createTagWithCDATAValue(a,c,b){return b+"<"+a+"><![CDATA["+c+"]]></"+a+">\n"}function generateDemoXML(d,c){var a=new this[d.name+"Demo"]();var e=c+"<demo>\n";e+=createTagWithValue("id",d.name,c+"\t");e+=createTagWithValue("name",d.name,c+"\t");e+=createTagWithValue("thumb",d.rawThumbnail.split(".png")[0],c+"\t");e+=createTagWithValue("customCaptureControls",a.customCaptureControls,c+"\t");e+=createTagWithValue("captureFrameRate",a.captureFrameRate,c+"\t");e+=createTagWithValue("gifPlaybackFrameRate",a.gifPlaybackFrameRate,c+"\t");e+=createTagWithValue("toolTip",a.toolTip,c+"\t");e+=createTagWithValue("toolTipShort",a.toolTipShort,c+"\t");e+=createTagWithValue("shortDemoName",a.shortDemoName,c+"\t");e+=(c+"\t<dependencies>\n");for(var b=0;b<d.rawDependencies.length;b++){e+=createTagWithCDATAValue("path",d.rawDependencies[b],c+"\t\t")}e+=(c+"\t</dependencies>\n");e+=(c+"</demo>\n");return e}function generateDemosXML(){console.log("generateDemosXML()");var a="<demosMenu>\n";var b,e,d,c;for(d=0;d<classManager.navigationItems.length;d++){a+="\t<menuItem>\n";a+="\t\t<demos>\n";b=classManager.navigationItems[d];if(b.subMenu&&b.subMenu.length>1){for(c=0;c<b.subMenu.length;c++){e=classManager.getDemoResourceByName(b.subMenu[d]);a+=generateDemoXML(e,"\t\t\t")}}else{e=classManager.getDemoResourceByName(b.demoName);a+=generateDemoXML(e,"\t\t\t")}a+="\t\t</demos>\n";a+="\t</menuItem>\n"}a+="</demosMenu>";console.log(a)}function init(){classManager=new DSClassManager();setUpDemosMenu();lightBox=new DSLightBox(undefined,lightBoxOpenComplete,lightBoxBeginClose,undefined,isMobile());window.onscroll=function(){forceHideDemo()};generateDemosXML();if(!window.location.hash){return}var a=getDemoFromHash(window.location.hash);if(classManager.getDemoResourceByName(a)){lastClickedDemoName=a;showDemo(a)}}var readyStateCheckInterval=setInterval(function(){if(document.readyState==="complete"){mailNode=document.getElementById("subscriber");clearInterval(readyStateCheckInterval);init()}},10);