function resizeHandler(){forceHideDemo();lightBox.isMobile=isMobile()}function viewportSize(){var c=window,b="inner";if(!("innerWidth" in window)){b="client";c=document.documentElement||document.body}return{width:c[b+"Width"],height:c[b+"Height"]}}function isHorizontalLayout(){var a=viewportSize();return a.width>a.height}function isMobile(){var a=viewportSize();return navigator.appVersion.toLowerCase().indexOf("mobile")>-1||Math.min(a.width,a.height)<400}function forceHideDemo(){if(lightBox&&lightBox.isOpen()){hideDemo(true)}}function lightBoxOverlayDivClick(){hideDemo()}function lightBoxNextDemoClickHandler(){tearDownDemo();var a=classManager.getNextDemoName();setUpDemo(a);location.hash=a;if(location.hostname&&location.hostname.toLowerCase().indexOf("devstate")>-1){ga("send","event","nextDemo")}}function lightBoxPreviousDemoClickHandler(){tearDownDemo();var a=classManager.getPreviousDemoName();setUpDemo(a);location.hash=a;if(location.hostname&&location.hostname.toLowerCase().indexOf("devstate")>-1){ga("send","event","previousDemo")}}function lightBoxResetDemoClickHandler(){tearDownDemo();setUpDemo(classManager.currentDemoName);if(location.hostname&&location.hostname.toLowerCase().indexOf("devstate")>-1){ga("send","event","resetDemo",classManager.currentDemoName)}}function lightBoxSubMenuClickHandler(a){tearDownDemo();setUpDemo(a)}var lightBoxLongSide=700;var lightBoxShortSide=400;var lightBoxVerticalLayoutHeight=600;var smallDemoSize=300;var largeDemoSize=400;var classManager;var currentDemo;var currentDemoClass;var detailsDiv;var demoRect;var contentRect;function showDemo(c){var b=viewportSize();contentRect=new SimpleGeometry.Rectangle();if(b.width>largeDemoSize&&b.height>largeDemoSize){demoRect=new SimpleGeometry.Rectangle(0,0,largeDemoSize,largeDemoSize)}else{demoRect=new SimpleGeometry.Rectangle(0,0,smallDemoSize,smallDemoSize)}var a=demoRect.width/lightBoxShortSide;if(isHorizontalLayout()){contentRect.width=lightBoxLongSide*a;contentRect.height=lightBoxShortSide*a;if(b.width<contentRect.width){contentRect.width=smallDemoSize}}else{contentRect.width=lightBoxShortSide*a;contentRect.height=lightBoxVerticalLayoutHeight*a;if(b.height<contentRect.height){contentRect.height=smallDemoSize}}contentRect.x=b.width/2-contentRect.width/2;contentRect.y=b.height/2-contentRect.height/2;if(b.width<contentRect.width||b.height<contentRect.height){alert("Sorry, your screen or resolution is too small("+b.width+"x"+b.height+") to show this demo");if(location.hostname&&location.hostname.toLowerCase().indexOf("devstate")>-1){ga("send","event","screenTooSmall",b.width+"x"+b.height)}return}lightBox.open(contentRect)}function setUpDemo(a){currentDemoClass=this[(a+"Demo")];classManager.loadDemo(a,demoJSLoadHandler,demoJSLoadErrorHandler)}function getDemoToolTip(a){return contentRect.width<largeDemoSize?"":getNodeValue(a,"toolTip")}function getLightBoxDemoTitle(b){var a=getNodeValue(b,"shortName");return(demoRect.width<largeDemoSize&&a)?a:getNodeValue(b,"name")}function getDemoBoxTitleStyle(){return isHorizontalLayout()?"demoTitle":"demoTitleThin"}function getResetString(){return contentRect.height<largeDemoSize?"F5":"Reset"}function smallSize(){return contentRect.width==smallDemoSize&&contentRect.height==smallDemoSize}function demoJSLoadHandler(){currentDemo=new currentDemoClass(demoRect.x,demoRect.y,demoRect.width,demoRect.height,lightBox.contentDiv);var d=demosXML.getElementById(classManager.currentDemoName);currentDemo.run();var e=10;detailsDiv=document.createElement("div");detailsDiv.style.position="absolute";if(isHorizontalLayout()){detailsDiv.style.left=(e+demoRect.width)+"px";detailsDiv.style.top=e+"px";detailsDiv.style.width=(contentRect.width-demoRect.width-e*2)+"px";detailsDiv.style.height=(contentRect.height-e*2)+"px"}else{detailsDiv.style.left=e+"px";detailsDiv.style.top=(e+demoRect.height)+"px";detailsDiv.style.width=(contentRect.width-e*2)+"px";detailsDiv.style.height=(contentRect.height-demoRect.height-e*2)+"px"}detailsDiv.style.fontFamily="Sans-serif";var c="<h2 class='"+getDemoBoxTitleStyle()+"' >"+getLightBoxDemoTitle(d)+"</h2><p style='padding-top:20px'>"+getDemoToolTip(d)+"</p>";var a=classManager.getSubmenuForDemoName(classManager.currentDemoName);if(a.length>0){c+="<p class='lightboxSubMenu' >";for(var b=0;b<a.length;b++){c+="<a href = 'javascript:void(0)' onclick = 'lightBoxSubMenuClickHandler(\""+a[b]+"\")'>"+a[b]+"</a>"}c+="</p>"}c+="<p class='lightboxControls' ><a href = 'javascript:void(0)' onclick = 'lightBoxPreviousDemoClickHandler(event)'>Previous</a>";c+="<a href = 'javascript:void(0)' onclick = 'lightBoxResetDemoClickHandler()' style='padding-left:20px'>"+getResetString()+"</a>";c+="<a href = 'javascript:void(0)' onclick = 'lightBoxNextDemoClickHandler()' style='padding-left:20px'>Next</a></p>";detailsDiv.innerHTML=c;lightBox.setContent(smallSize()?undefined:detailsDiv);if(location.hostname&&location.hostname.toLowerCase().indexOf("devstate")>-1){ga("send","event","DemoView",classManager.currentDemoName)}}function demoJSLoadErrorHandler(){console.log("demoJSLoadErrorHandler()")}function tearDownDemo(){if(currentDemo){currentDemo.tearDown()}if(detailsDiv){lightBox.removeContent(detailsDiv)}}function hideDemo(a){if(a){lightBox.forceClose()}else{lightBox.close()}}function lightBoxOpenComplete(){setUpDemo(lastClickedDemoName)}function lightBoxBeginClose(){tearDownDemo();location.hash=""}var lastClickedDemoName;function demoLinkClickHandler(a){lastClickedDemoName=getDemoFromHash(a.currentTarget.hash);showDemo(lastClickedDemoName)}function showGif(b){if(!isMobile()){return}var c=b.target.src.split("/");var a=c[c.length-1].split(".png")[0];c[c.length-1]=a+".gif";b.target.src=c.join("/")}function showPng(b){if(!isMobile()){return}var c=b.target.src.split("/");var a=c[c.length-1].split(".gif")[0];c[c.length-1]=a+".png";b.target.src=c.join("/")}function getDemoFromHash(a){return a.split("#")[1]}var demosXML;function parseDemosXML(){var a=document.getElementById("demosMenuXML").textContent;var b=new DOMParser();demosXML=b.parseFromString(a,"application/xml")}function getNodeValue(a,c){var b=a.getElementsByTagName(c)[0];if(!b){return""}if(!b||!b.childNodes||!b.childNodes[0]||!b.childNodes[0].nodeValue){return""}return b.childNodes[0].nodeValue}function setUpDemosMenuFromXML(){var c=demosXML.getElementsByTagName("menuItem");var a="";var d;for(var b=0;b<c.length;b++){d=c[b].getElementsByTagName("demo")[0];a+='<div class="item">';a+='<a href="#'+d.getAttribute("id")+'" onclick = "demoLinkClickHandler(event)">';a+='<img src="assets/demoThumbnails/'+getNodeValue(d,"thumb")+'.png" onmouseover="showGif(event)" onmouseout="showPng(event)">';a+="</a>";a+="</div>"}a+='<div class="clearfix"></div>';document.getElementById("demos").innerHTML=a}function init(){parseDemosXML();classManager=new DSClassManager(demosXML);setUpDemosMenuFromXML();lightBox=new DSLightBox(undefined,lightBoxOpenComplete,lightBoxBeginClose,undefined,isMobile());window.onscroll=function(){forceHideDemo()};if(!window.location.hash){return}var a=getDemoFromHash(window.location.hash);if(classManager.getDemoResourceByName(a)){lastClickedDemoName=a;showDemo(a)}}var readyStateCheckInterval=setInterval(function(){if(document.readyState==="complete"){mailNode=document.getElementById("subscriber");clearInterval(readyStateCheckInterval);init()}},10);