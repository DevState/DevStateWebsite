(function(b){var d=function(e){this.loadedScripts=[];this.demosXML=e;this.setDemoResources()};d.prototype.getNodeValue=function(e,f){return e.getElementsByTagName(f)[0].childNodes[0].nodeValue};d.prototype.createDemoResourceFromDemoNode=function(k){var g=this.getNodeValue(k,"id");var f=this.getNodeValue(k,"thumb")+".png";var e=k.getElementsByTagName("dependencies")[0];var l=e.getElementsByTagName("path");var j=[];for(var h=0;h<l.length;h++){j[h]=l[h].childNodes[0].nodeValue}return new c(g,f,j)};d.prototype.setDemoResources=function(){this.demos=[];this.navigationItems=[];var g=this.demosXML.getElementsByTagName("menuItem");var h,f,n,o,l,m,k,e;for(m=0;m<g.length;m++){f=g[m];l=[];e=f.getElementsByTagName("demo");for(k=0;k<e.length;k++){h=this.createDemoResourceFromDemoNode(e[k]);this.demos.push(h);l.push(h.name);console.log("setDemoResources",h.name)}if(l.length>1){this.navigationItems.push(new a(l[0],l.concat()))}else{this.navigationItems.push(new a(h.name))}}this.currentDemoName=""};d.prototype.getNextDemoName=function(){for(var e=0;e<this.navigationItems.length;e++){if(this.currentDemoName==this.navigationItems[e].demoName||this.navigationItems[e].subMenu.indexOf(this.currentDemoName)>-1){if(e<this.navigationItems.length-1){return this.navigationItems[e+1].demoName}}}return this.navigationItems[0].demoName};d.prototype.getPreviousDemoName=function(){for(var e=0;e<this.navigationItems.length;e++){if(this.currentDemoName==this.navigationItems[e].demoName||this.navigationItems[e].subMenu.indexOf(this.currentDemoName)>-1){if(e>0){return this.navigationItems[e-1].demoName}}}return this.navigationItems[this.navigationItems.length-1].demoName};d.prototype.getNavigationItemForDemoName=function(f){var g;for(var e=0;e<this.navigationItems.length;e++){g=this.navigationItems[e];if(g.demoName==f){return g}}return undefined};d.prototype.getSubmenuForDemoName=function(e){var f=this.getNavigationItemForDemoName(e);if(f){return f.subMenu}return[]};d.prototype.getDemoResourceByName=function(e){for(var f=0;f<this.demos.length;f++){if(this.demos[f].name==e){return this.demos[f]}}return null};d.prototype.getDemoResourceForNavigationItem=function(f){for(var e=0;e<this.demos.length;e++){if(this.demos[e].name==f.demoName){return this.demos[e]}}return undefined};d.prototype.scriptIsLoaded=function(e){return this.loadedScripts.indexOf(e)>-1};d.prototype.loadScript=function(f,g,h){if(this.scriptIsLoaded(f)){setTimeout(g,200);return}var e=document.createElement("script");e.type="text/javascript";if(e.readyState){e.onreadystatechange=function(){if(e.readyState=="loaded"||e.readyState=="complete"){e.onreadystatechange=null;g()}}}else{e.onload=function(){g()};e.onerror=function(){console.log("DSClassManager.loadScript ERROR");h()}}e.src=f;document.getElementsByTagName("head")[0].appendChild(e);this.loadedScripts.push(f)};d.prototype.loadDemo=function(e,f,g){this.currentLoadDemoResource=this.getDemoResourceByName(e);this.currentDemoName=e;this.loadDemoCallback=f;this.loadDemoErrorCallBack=g;if(!this.currentLoadDemoResource){console.log("DSClassManager.loadDemo() Error, no demo found");g();return}this.loadNextDemoResourceJSFile()};d.prototype.loadNextDemoResourceJSFileError=function(){console.log("DSClassManager.loadNextDemoResourceJSFileError()");this.loadDemoErrorCallBack()};d.prototype.loadNextDemoResourceJSFile=function(){for(var e=0;e<this.currentLoadDemoResource.dependencies.length;e++){if(!this.scriptIsLoaded(this.currentLoadDemoResource.dependencies[e])){var f=this;this.loadScript(this.currentLoadDemoResource.dependencies[e],function(){f.loadNextDemoResourceJSFile()},function(){f.loadNextDemoResourceJSFileError()});return}}this.loadDemoCallback();this.loadDemoCallback=null;this.loadDemoErrorCallBack=null;this.currentLoadDemoResource=null};b.DSClassManager=d;var c=function(e,g,f){this.name=e;this.thumbnail="assets/demoThumbnails/"+g;this.rawThumbnail=g;this.setDependencies(f)};c.prototype.setDependencies=function(g){this.dependencies=[];this.rawDependencies=[];var f=(location.hostname&&location.hostname.toLowerCase().indexOf("devstate")>-1)?".min.js":".js";for(var e=0;e<g.length;e++){this.dependencies.push(g[e]+f);this.rawDependencies.push(g[e])}};b.DSDemoResource=c;var a=function(f,e){this.demoName=f;this.subMenu=e==undefined?[]:e};b.DSDemoResource=c}(window));