(function(a){ImageStore=function(){};ImageStore.prototype.loadImages=function(d,b,c){this.urls=d;this.completeCallback=b;this.updateCallback=c!=undefined?c:undefined;this.images=[];this.currentLoadIndex=0;this.loadNextImage()};ImageStore.prototype.stop=function(){this.completeCallback=undefined;this.updateCallback=undefined;this.urls=[]};ImageStore.prototype.getProgressPercent=function(){return SimpleGeometry.normalize(this.currentLoadIndex,0,this.urls.length)};ImageStore.prototype.getProgressString=function(){return this.currentLoadIndex+" / "+this.urls.length};ImageStore.prototype.loadNextImage=function(){if(this.currentLoadIndex>=this.urls.length){this.completeCallback();return}var c=new Image();var d=this;c.onload=function(){d.imageLoadComplete()};var b=this.urls[this.currentLoadIndex];c.onerror=function(){alert("ImageStore ERROR : "+b+" could not be loaded.")};c.src=this.urls[this.currentLoadIndex];this.images.push(c);this.currentLoadIndex++};ImageStore.prototype.imageLoadComplete=function(){for(var b=0;b<this.images.length;b++){this.images[b].onload=undefined}if(this.updateCallback!=undefined){this.updateCallback()}this.loadNextImage()};a.ImageStore=ImageStore}(window));